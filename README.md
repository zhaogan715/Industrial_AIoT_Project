Markdown

# å·¥ä¸šAIè´¨æ£€ä¸æ•°å­—å­ªç”Ÿç³»ç»Ÿ v1.0

![Project Status](https://img.shields.io/badge/status-complete-green)
![Python Version](https://img.shields.io/badge/python-3.11-blue)
![Framework](https://img.shields.io/badge/framework-TensorFlow%20Lite%20%7C%20asyncua%20%7C%20Grafana-orange)
![License](https://img.shields.io/badge/license-MIT-lightgrey)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºè¾¹ç¼˜è®¡ç®—çš„å·¥ä¸šç‰©è”ç½‘ï¼ˆAIoTï¼‰è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨æ¨¡æ‹Ÿä¸€ä¸ªç°ä»£æ™ºèƒ½åˆ¶é€ åœºæ™¯ã€‚ç³»ç»Ÿå®ç°äº†ä» **è¾¹ç¼˜AIè§†è§‰æ„ŸçŸ¥**ã€**M2Må·¥ä¸šåè®®æ§åˆ¶**ï¼Œåˆ° **äº‘ç«¯æ—¶åºæ•°æ®å¯è§†åŒ–** çš„ç«¯åˆ°ç«¯å…¨æ•°æ®é“¾è·¯ã€‚

å®ƒå±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„AIä»»åŠ¡ï¼ˆæ‰‹å†™æ•°å­—è¯†åˆ«ï¼‰èƒŒåï¼Œæ‰€éœ€è¦æ­å»ºçš„**å¥å£®ã€é«˜å¹¶å‘ã€å¤šåè®®çš„å·¥ä¸šçº§ç³»ç»Ÿæ¶æ„**ã€‚

---

###  æ¼”ç¤ºè§†é¢‘ (Demo)


![Demo GIF Placeholder](httpsGIPHY_LINK_HERE)

---

###  æ ¸å¿ƒåŠŸèƒ½ (Features)

* **å®æ—¶AIè¾¹ç¼˜æ¨ç†**: åœ¨æ ‘è“æ´¾è¾¹ç¼˜èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨TensorFlow Liteå’ŒOpenCVï¼Œå¯¹å®æ—¶è§†é¢‘æµè¿›è¡ŒAIè´¨æ£€ï¼ˆ<100msï¼‰ã€‚
* **åŒé‡è§†è§‰è°ƒè¯•**: åŒæ—¶æ˜¾ç¤ºâ€œåŸå§‹è§†é¢‘æµâ€å’Œâ€œAIé¢„å¤„ç†ç‰¹å¾å›¾â€ï¼ˆ28x28é»‘ç™½å›¾åƒï¼‰ï¼Œå®æ—¶ç›‘æ§AIçš„â€œæ‰€è§â€ã€‚
* **å·¥ä¸šM2Mè”åŠ¨**: AIè¯†åˆ«ç»“æœï¼ˆå¦‚â€œç¼ºé™·å“â€ï¼‰é€šè¿‡**OPC UA**åè®®ï¼Œå®æ—¶è§¦å‘æ¨¡æ‹Ÿäº§çº¿è®¾å¤‡ï¼ˆProsysæœåŠ¡å™¨ï¼‰çš„è‡ªåŠ¨åœæœºæŒ‡ä»¤ã€‚
* **æ•°å­—å­ªç”Ÿä»ªè¡¨ç›˜**: åœ¨Grafanaä¸­æ„å»ºçš„å®æ—¶ç›‘æ§ä¸­å¿ƒï¼Œé€šè¿‡**Flux**è¯­è¨€ä»InfluxDBæ‹‰å–æ•°æ®ï¼Œæå¤§ç¨‹åº¦è¿˜åŸç‰©ç†ç³»ç»Ÿçš„æ•°å­—é•œåƒã€‚
* **å¤šçº¿ç¨‹é«˜å¹¶å‘æ¶æ„**: è§£å†³äº†Pythonçš„`asyncio`ï¼ˆå¼‚æ­¥I/Oï¼‰ä¸`cv2.imshow`ï¼ˆåŒæ­¥GUIï¼‰çš„å†²çªï¼Œå®ç°äº†ä¸‰ä¸ªçº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œäº’ä¸é˜»å¡ã€‚
* **å…¨é“¾è·¯ç¯å¢ƒé¥æµ‹**: é€šè¿‡Arduinoå’Œ`pyserial`åº“ï¼Œå°†å®æ—¶çš„æ¸©æ¹¿åº¦é¥æµ‹æ•°æ®ä¸ŠæŠ¥è‡³InfluxDBï¼Œä¸AIè´¨æ£€ç»“æœåœ¨åŒä¸€å¹³å°å½’æ¡£ã€‚

---

### ğŸ—ï¸ é¡¹ç›®æ¶æ„ (Project Architecture)

æœ¬é¡¹ç›®çš„æ¶æ„è®¾è®¡æ¸…æ™°åœ°åˆ†ç¦»äº†åç«¯æœåŠ¡ã€è¾¹ç¼˜è®¡ç®—å’Œç¡¬ä»¶æ„ŸçŸ¥ï¼Œæ ¸å¿ƒ`main_project.py`é‡‡ç”¨ä¸‰çº¿ç¨‹æ¨¡å‹è§£è€¦äº†GUIä¸I/Oä»»åŠ¡ã€‚

Industrial_AIoT_Project/ â”œâ”€â”€ hardware/ â”‚ â””â”€â”€ arduino_dht11_json.ino # (Arduino) ä¼ æ„Ÿå™¨JSONè¾“å‡ºå›ºä»¶ â”‚ â”œâ”€â”€ backend_services/ â”‚ â””â”€â”€ docker-compose.yml # (PC) ä¸€é”®å¯åŠ¨InfluxDBå’ŒGrafana â”‚ â”œâ”€â”€ edge_node/ â”‚ â”œâ”€â”€ main_project.py # (RPI) æ ¸å¿ƒä¸»ç¨‹åºï¼ˆä¸‰çº¿ç¨‹æ¶æ„ï¼‰ â”‚ â””â”€â”€ mnist_model_quantized.tflite # (RPI) AIé‡åŒ–æ¨¡å‹ â”‚ â””â”€â”€ README.md # (æœ¬é¡¹ç›®) é¡¹ç›®è¯´æ˜æ–‡æ¡£


---

### ğŸ”§ æŠ€æœ¯æ ˆ (Technology Stack)

* **è¾¹ç¼˜è®¡ç®—**: Python 3.11, Raspberry Pi 4B
* **AI æ¡† æ¶**: TensorFlow Lite (`tflite-runtime`), OpenCV, NumPy
* **å·¥ä¸šé€šä¿¡**: OPC UA (`asyncua` åº“)
* **æ•° æ® å ç«¯**: Docker, InfluxDB v2.7, Grafana
* **æ•° æ® æŸ¥ è¯¢**: Flux Language
* **ç¡¬ ä»¶ é€š ä¿¡**: `pyserial`, `Arduino (C++)`, `ArduinoJson`
* **å¹¶ å‘ ç¼– ç¨‹**: `threading` (å¤šçº¿ç¨‹), `asyncio` (å¼‚æ­¥)

---

### ğŸ§© æ ¸å¿ƒæŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

**æŒ‘æˆ˜**: åœ¨å•ä¸€Pythonè„šæœ¬ä¸­ï¼ŒåŒæ—¶è¿è¡Œ `cv2.imshow` (GUI) å’Œ `asyncio` (ç½‘ç»œI/O)ã€‚

* **é—®é¢˜**: `cv2.imshow` åŠå…¶ `cv2.waitKey` æ˜¯**åŒæ­¥é˜»å¡**æ“ä½œï¼Œå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿è¡Œã€‚è€Œ `asyncio.run()` ä¹Ÿæ˜¯ä¸€ä¸ª**é˜»å¡**æ“ä½œï¼Œå®ƒä¼šå¯åŠ¨è‡ªå·±çš„äº‹ä»¶å¾ªç¯æ¥ç®¡ç†å¼‚æ­¥I/Oï¼ˆå¦‚OPC UAé€šä¿¡ï¼‰ã€‚å½“å®ƒä»¬åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ—¶ï¼Œä¸¤è€…ä¼šäº’ç›¸â€œå†»ç»“â€ï¼Œå¯¼è‡´GUIå¡æ­»æˆ–ç½‘ç»œè¶…æ—¶ã€‚
* **è§£å†³æ–¹æ¡ˆ**: **æ¶æ„é‡æ„ä¸ºä¸‰çº¿ç¨‹æ¨¡å‹**ã€‚
    1.  **ä¸»çº¿ç¨‹**: ä¸“é—¨è´Ÿè´£`OpenCV`çš„GUIå¾ªç¯ (`main_gui_func`)ï¼Œç¡®ä¿çª—å£å®æ—¶åˆ·æ–°ã€‚
    2.  **å­çº¿ç¨‹ 1**: ä¸“é—¨è¿è¡Œ`asyncio`äº‹ä»¶å¾ªç¯ (`opcua_thread_func`)ï¼Œåœ¨åå°é«˜å¹¶å‘åœ°å¤„ç†OPC UAé€šä¿¡ã€‚
    3.  **å­çº¿ç¨‹ 2**: ä¸“é—¨è¿è¡Œ`pyserial`å’Œ`influxdb-client` (`environment_thread_func`)ï¼Œåœ¨åå°å¤„ç†ç¡¬ä»¶ä¸²å£çš„é˜»å¡è¯»å–å’Œç½‘ç»œä¸ŠæŠ¥ã€‚
    4.  **çº¿ç¨‹é€šä¿¡**: ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å…¨å±€å˜é‡ï¼ˆå¦‚`RUNNING`æ ‡å¿—å’Œ`predicted_label_data`åˆ—è¡¨ï¼‰æ¥åè°ƒæ‰€æœ‰çº¿ç¨‹çš„å¯åŠ¨ã€æ•°æ®å…±äº«å’Œä¼˜é›…é€€å‡ºã€‚

---

### ğŸ’» ç¡¬ä»¶éœ€æ±‚

* æ ‘è“æ´¾4Bï¼ˆå·²å®‰è£…64ä½Raspberry Pi OSï¼‰
* å…é©±åŠ¨çš„USBæ‘„åƒå¤´
* Arduino Uno
* DHT11 æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨
* æœé‚¦çº¿ã€é¢åŒ…æ¿ã€USBæ•°æ®çº¿
* ä¸€å°ç”¨äºè¿è¡Œåç«¯çš„PCï¼ˆWindows/macOS/Linuxï¼‰

---

### âš™ï¸ å¿«é€Ÿä¸Šæ‰‹ (Installation & Usage)

#### 1. åç«¯æœåŠ¡ (åœ¨ä¸»ç”µè„‘ä¸Š)

1.  å®‰è£… [Docker Desktop](https://www.docker.com/products/docker-desktop/)ã€‚
2.  å®‰è£… [Prosys OPC UA Simulation Server](https://www.prosysopc.com/products/opc-ua-simulation-server/)ã€‚
3.  åœ¨`backend_services/`ç›®å½•ä¸­ï¼Œåˆ›å»º `docker-compose.yml` ã€‚
4.  åœ¨Prosysä¸­ï¼Œåˆ›å»ºå¥½ä½ çš„æ¨¡æ‹ŸèŠ‚ç‚¹ï¼ˆ`DeviceStatus`, `TriggerStop`, `DefectType`ï¼‰ï¼Œå¹¶**å³é”®å¤åˆ¶å®ƒä»¬çš„NodeId**ã€‚
5.  å¯åŠ¨æœåŠ¡:
    ```bash
    cd backend_services
    docker-compose up -d
    ```

#### 2. ç¡¬ä»¶ (Arduino)

1.  åœ¨Arduino IDEä¸­ï¼Œå®‰è£… `ArduinoJson` åº“ã€‚
2.  çƒ§å½• `hardware/arduino_dht11_json.ino` å›ºä»¶åˆ°Arduino Unoã€‚

#### 3. è¾¹ç¼˜èŠ‚ç‚¹ (æ ‘è“æ´¾)

1.  å°†`edge_node/`ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¼ è¾“åˆ°æ ‘è“æ´¾çš„`/home/pi`ç›®å½•ã€‚
2.  å°†Arduinoå’ŒUSBæ‘„åƒå¤´è¿æ¥åˆ°æ ‘è“æ´¾ã€‚
3.  æ‰“å¼€PuTTYç»ˆç«¯ï¼Œåˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š
    ```bash
    python3 -m venv tflite-env
    source tflite-env/bin/activate
    ```
4.  å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š
    ```bash
    # AI ä¾èµ–
    pip install "tflite-runtime==2.14.0" "numpy==1.26.4" opencv-python
    
    # IoT ä¾èµ–
    pip install asyncua pyserial influxdb-client
    ```
5.  **ä¿®æ”¹è„šæœ¬é…ç½® (æœ€å…³é”®ä¸€æ­¥)**:
    * æ‰“å¼€ `main_project.py`ã€‚
    * å°† `INFLUXDB_URL` å’Œ `OPCUA_URL` ä¸­çš„IPåœ°å€ï¼Œ**æ›¿æ¢ä¸ºè‡ªå·±ä¸»ç”µè„‘çš„çœŸå®IPåœ°å€**ã€‚
    * å°† `DEFECT_NODE_ID`, `STATUS_NODE_ID`, `STOP_NODE_ID` **æ›¿æ¢ä¸ºè‡ªå·±ä»Prosyså¤åˆ¶çš„ç²¾ç¡®NodeId**ã€‚
    * ç¡®è®¤ `ARDUINO_PORT` (å¦‚ `/dev/ttyACM0`) æ˜¯å¦æ­£ç¡®ã€‚

#### 4. å¯åŠ¨ç³»ç»Ÿ

1.  é€šè¿‡ **X11è½¬å‘** (å¦‚ MobaXterm æˆ– `ssh -X`) ç™»å½•çš„ï¼Œæˆ–è€…ç»™æ ‘è“æ´¾å¤–æ¥äº†æ˜¾ç¤ºå™¨ã€‚
2.  åœ¨å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒçš„ç»ˆç«¯ä¸­ï¼Œè¿è¡Œï¼š
    ```bash
    cd /home/pi/edge_node
    python main_project.py
    ```
3.  ç³»ç»Ÿå°†å¯åŠ¨ï¼ŒåŒæ—¶å¼¹å‡ºä¸¤ä¸ªæ‘„åƒå¤´çª—å£ï¼Œç»ˆç«¯å¼€å§‹æ‰“å°æ—¥å¿—ï¼ŒGrafanaä»ªè¡¨ç›˜å¼€å§‹æ¥æ”¶æ•°æ®ã€‚

---

### ğŸ“œ è®¸å¯è¯ (License)

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚